import base64
exec(base64.b64decode("IyAtKi0gY29kaW5nPXV0Zi04IC0qLQpmcm9tIHN5cyBpbXBvcnQgc3Rkb3V0CmltcG9ydCBzdWJwcm9jZXNzIGFzIHNwCmltcG9ydCBvcywgc3lzLCB0aW1lLCByYW5kb20sIGJhc2U2NCwgbWFyc2hhbCwgZ2V0cGFzcywgcmUsIHpsaWIKbSA9ICdceDFiWzE7OTFtJwp1ID0gJ1x4MWJbMTs5NW0nCmggPSAnXHgxYlsxOzkybScKcCA9ICdceDFiWzE7MzdtJwprID0gJ1x4MWJbMTszM20nCmIgPSAnXHgxYlsxOzM0bScKYm0gPSAnXHgxYls5Nm0nCgp0cnk6CiAgICBmcm9tIHVuY29tcHlsZTYubWFpbiBpbXBvcnQgZGVjb21waWxlCmV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgIHNwLmNhbGwoJ3BpcDIgaW5zdGFsbCB1bmNvbXB5bGU2Jywgc2hlbGw9VHJ1ZSwgc3RkZXJyPXNwLlNURE9VVCkKcmVkICAgPSAnXHgxYlszMW0nCmdyZWVuID0gJ1x4MWJbMzJtJwp5ZWxsb3cgPSAnXHgxYlszM20nCmJsdWUgID0gJ1x4MWJbMzRtJwptYWdlbnRhID0gJ1x4MWJbMzVtJwpjeWFuICA9ICdceDFiWzM2bScKd2hpdGUgPSAnXHgxYlszN20nCnJlc2V0ID0gJ1x4MWJbMzltJwpicmJsYWNrID0gJ1x4MWJbOTBtJwpSID0gJ1x4MWJbOTFtJwpicmdyZWVuID0gJ1x4MWJbOTJtJwprID0gJ1x4MWJbOTNtJwpicmJsdWUgPSAnXHgxYls5NG0nCmJybWdudCA9ICdceDFiWzk1bScKYnJjeWFuID0gJ1x4MWJbOTZtJwpHID0gJ1x4MWJbOTdtJwpkZWYgamFsYW4oeiwgdCk6CiAgICBmb3IgZSBpbiB6OgogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZSkKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICB0aW1lLnNsZWVwKHQpCmRlZiBsb2FkKHdvcmQpOgogICAgbGl4ID0gWwogICAgICcvJywgJy0nLCAn4pWyJywgJ3wnXQogICAgZm9yIGkgaW4gcmFuZ2UoNSk6CiAgICAgICAgZm9yIHggaW4gcmFuZ2UobGVuKGxpeCkpOgogICAgICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKCgnXHJ7fXt9JykuZm9ybWF0KHN0cih3b3JkKSwgbGl4W3hdKSkKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjIpCiAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQpkZWYgYmFubmVyX2RlYygpOgogICAgYmFubmVyID0gJycne30nJycuZm9ybWF0KG0pCiAgICBwcmludChiYW5uZXIpCiAgICBvcy5zeXN0ZW0oJ2ZpZ2xldCAtZiBzbGFudCAiREVDUllQVCInKQpkZWYgYmFubmVyX2VuYygpOgogICAgYmFubmVyID0gJycne30nJycuZm9ybWF0KG0pCiAgICBwcmludChiYW5uZXIpCiAgICBvcy5zeXN0ZW0oJ2ZpZ2xldCAtZiBzbGFudCAiRU5DUllQVCInKQpkZWYgcnVubmluZyhzKToKCXRyeToKCQlmb3IgYyBpbiBzICsgJ1xuJzoKICAgICAgICAJICAgIHN5cy5zdGRvdXQud3JpdGUoYykKCSAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQoJICAgICAgICAgICAgdGltZS5zbGVlcCgwLjAwMSkKCWV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsRU9GRXJyb3IpOgoJCXJ1bignRXhpdCEnKQpkZWYgcnVuKHgpOgogICAgcHQgPSAnXHgxYlsxOzM3bScKICAgIHJkID0gJ1x4MWJbMTszN21ceDFiWzE7MzFtJwogICAgcmcgPSAnXHgxYls2OzMybScKICAgIHRyeToKICAgICAgICBudW0gPSAwCiAgICAgICAgd2hpbGUgbnVtIDwgMToKICAgICAgICAgICAgZm9yIGksIGNoYXIgaW4gZW51bWVyYXRlKHgpOgogICAgICAgICAgICAgICAgaWYgaSA9PSAwOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdcciVzJXMlcyVzJyAlIChyZywgY2hhci5sb3dlcigpLCByZCwgeFsxOl0pLAogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBpID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgIG9ra2xhaCA9IHhbMF0ubG93ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHIlcyVzJXMlcyVzJXMnICUgKHJkLCBva2tsYWgsIHB0LCBjaGFyLmxvd2VyKCksIHJnLCB4WzI6XSksCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGVsaWYgaSA9PSBpOgogICAgICAgICAgICAgICAgICAgICAgICBva2tsYWggPSB4WzA6aV0ubG93ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHIlcyVzJXMlcyVzJXMnICUgKHJkLCBva2tsYWgsIHB0LCBjaGFyLmxvd2VyKCksIHJnLCB4W2kgKyAxOl0pLAogICAgICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuMDcpCgogICAgICAgICAgICBudW0gKz0gMQoKICAgIGV4Y2VwdDoKICAgICAgICBleGl0KCkKCgpkZWYgY2xyKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKCgpkZWYgbG9nbygpOgogICAgYmFubmVyX2VuYygpCmRlZiBiX21lbnUoKToKICAgIGphbGFuKCIiIgpcMDMzWzE7OTFt4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4paI4pWXICAg4paI4paI4pWXIOKWiOKWiOKWiOKWiOKWiOKWiOKVlyDilojilojilojilojilojilojilZcg4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKWiOKWiOKWiOKVlyDilojilojilojilojilojilojilojilZcK4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4paI4paI4pWXICDilojilojilZHilojilojilZTilZDilZDilZDilZDilZ3ilojilojilZTilZDilZDilZDilZDilZ3ilojilojilZTilZDilZDilZDilojilojilZfilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilZDilZDilZ0K4paI4paI4paI4paI4paI4pWXICDilojilojilZTilojilojilZcg4paI4paI4pWR4paI4paI4pWRICAgICDilojilojilZEgICAgIOKWiOKWiOKVkSAgIOKWiOKWiOKVkeKWiOKWiOKVkSAg4paI4paI4pWR4paI4paI4paI4paI4paI4pWXCuKWiOKWiOKVlOKVkOKVkOKVnSAg4paI4paI4pWR4pWa4paI4paI4pWX4paI4paI4pWR4paI4paI4pWRICAgICDilojilojilZEgICAgIOKWiOKWiOKVkSAgIOKWiOKWiOKVkeKWiOKWiOKVkSAg4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4pWdCuKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKVkSDilZrilojilojilojilojilZHilZrilojilojilojilojilojilojilZfilZrilojilojilojilojilojilojilZfilZrilojilojilojilojilojilojilZTilZ3ilojilojilojilojilojilojilZTilZ3ilojilojilojilojilojilojilojilZcK4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWdICDilZrilZDilZDilZDilZ0g4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIOKVmuKVkOKVkOKVkOKVkOKVkOKVnSDilZrilZDilZDilZDilZDilZDilZ0g4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIOKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVnQoKXDAzM1sxOzk0beKWiOKWiOKVlyAgICDilojilojilZfilojilojilZfilojilojilojilojilojilojilojilojilZfilojilojilZcgIOKWiOKWiOKVlwrilojilojilZEgICAg4paI4paI4pWR4paI4paI4pWR4pWa4pWQ4pWQ4paI4paI4pWU4pWQ4pWQ4pWd4paI4paI4pWRICDilojilojilZEK4paI4paI4pWRIOKWiOKVlyDilojilojilZHilojilojilZEgICDilojilojilZEgICDilojilojilojilojilojilojilojilZEK4paI4paI4pWR4paI4paI4paI4pWX4paI4paI4pWR4paI4paI4pWRICAg4paI4paI4pWRICAg4paI4paI4pWU4pWQ4pWQ4paI4paI4pWRCuKVmuKWiOKWiOKWiOKVlOKWiOKWiOKWiOKVlOKVneKWiOKWiOKVkSAgIOKWiOKWiOKVkSAgIOKWiOKWiOKVkSAg4paI4paI4pWRCiDilZrilZDilZDilZ3ilZrilZDilZDilZ0g4pWa4pWQ4pWdICAg4pWa4pWQ4pWdICAg4pWa4pWQ4pWdICDilZrilZDilZ0KClwwMzNbMTs5Mm0K4paI4paI4paI4paI4paI4paI4pWX4paR4paR4paI4paI4paI4paI4paI4pWX4paR4paI4paI4paI4paI4paI4paI4pWX4paR4paI4paI4pWX4paR4paR4paI4paI4pWXCuKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVkeKWkeKWiOKWiOKVlOKVnQrilojilojilZHilpHilpHilojilojilZHilojilojilojilojilojilojilojilZHilojilojilojilojilojilojilZTilZ3ilojilojilojilojilojilZDilZ3ilpEK4paI4paI4pWR4paR4paR4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4paI4paI4pWX4paI4paI4pWU4pWQ4paI4paI4pWX4paRCuKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkeKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkeKWiOKWiOKVkeKWkeKVmuKWiOKWiOKVlwrilZrilZDilZDilZDilZDilZDilZ3ilpHilZrilZDilZ3ilpHilpHilZrilZDilZ3ilZrilZDilZ3ilpHilpHilZrilZDilZ3ilZrilZDilZ3ilpHilpHilZrilZDilZ0KCuKWkeKWiOKWiOKVl+KWkeKWkeKWkeKWkeKWkeKWkeKWkeKWiOKWiOKVl+KWkeKWiOKWiOKWiOKWiOKWiOKVl+KWkeKWiOKWiOKVl+KWkeKWkeKWkeKWkeKWkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlwrilpHilojilojilZHilpHilpHilojilojilZfilpHilpHilojilojilZHilojilojilZTilZDilZDilojilojilZfilojilojilZHilpHilpHilpHilpHilpHilojilojilZTilZDilZDilZDilZDilZ0K4paR4pWa4paI4paI4pWX4paI4paI4paI4paI4pWX4paI4paI4pWU4pWd4paI4paI4pWR4paR4paR4paI4paI4pWR4paI4paI4pWR4paR4paR4paR4paR4paR4paI4paI4paI4paI4paI4pWX4paR4paRCuKWkeKWkeKWiOKWiOKWiOKWiOKVlOKVkOKWiOKWiOKWiOKWiOKVkeKWkeKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkeKWiOKWiOKVkeKWkeKWkeKWkeKWkeKWkeKWiOKWiOKVlOKVkOKVkOKVneKWkeKWkQrilpHilpHilZrilojilojilZTilZ3ilpHilZrilojilojilZTilZ3ilpHilZrilojilojilojilojilojilZTilZ3ilojilojilojilojilojilojilojilZfilojilojilZHilpHilpHilpHilpHilpEK4paR4paR4paR4pWa4pWQ4pWd4paR4paR4paR4pWa4pWQ4pWd4paR4paR4paR4pWa4pWQ4pWQ4pWQ4pWQ4pWd4paR4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWd4paR4paR4paR4paR4paRCgpQcm9ncmFtbWVkIEJ5IERBUksgV09MRiBIQUNLSU5HIPCfmI4KVEVMRUdSQU06IERBUksgV09MRiBIQUNLSU5HIOKYoO+4jwpGYWNlYm9vayA6IFRIRSBNQVNURVIgTUFGSUEKV2FybmluZyA6IEkgYW0gbm90IHJlc3BvbnNpYmxlIGZvciBtaXNzZWQgdXNlZCAKCiBcMDMzWzE7OTJtICAgICAgLS0tLS0tLS0tLS0uICAgICAgICAuLS0tLS0tLS0tLS0KICAgICAgICAgLS0tLS0tICAgIFwgIF9fICAvICAgIC0tLS0tLQogICAgICAgICAgIC0tLS0tICAgIFwoICApLyAgICAtLS0tLQogICAgICAgICAgICAgIC0tLSAgICcgXC8gYCAgIC0tLQogICAgICAgICAgICAgICAgLS0tIDogICAgOiAtLS0KICAgICAgICAgICAgICAgICAgLS1gICAgICctLQogICAgICAgICAgICAgICAgICBgL2AvLi5cYFxgCiAgICAgICAgICAgICAgPT09PVVVPT09PVVVPT09PQogICAgICAgICAgICAgICAgICAgJy8vfHxcXGAKICAgICAgICAgICAgICAgICAgICAgICcnYGAKICAgICAiIiIsMC4wMDEpCmRlZiBtZW51KCk6CiAgICBjbHIoKQogICAgYl9tZW51KCkKICAgIHJ1bm5pbmcoJ1xue31be30xe31de30gRW5jcnlwdFxue31be30ye31de30gRGVjcnlwdFxuJy5mb3JtYXQobSxwLG0scCxtLHAsbSxwLG0scCxtLHAsbSxwLG0scCxtLHAsbSxwKSkKICAgIGFzd3cgPSByYXdfaW5wdXQoJ3t9W3t9P3t9XXt9IENob29zZSB7fT4+IHt9Jy5mb3JtYXQobSxwLG0scCxrLHApKQogICAgaWYgYXN3dyA9PSAnMScgb3IgYXN3dyA9PSAnMDEnOgoJbG9hZCgnUnVubmluZy4uLicpCgltZW51X2VuYygpCiAgICBlbGlmIGFzd3cgPT0gJzInIG9yIGFzd3cgPT0gJzAyJzoKCWxvYWQoJ1J1bm5pbmcuLi4nKQoJbWVudV9kZWMoKQogICAgZWxpZiBhc3d3ID09ICcnOgoJcnVuKCdIdWg/JykKCW1lbnUoKQogICAgZWxzZToKCXJ1bignUGxlYXNlIGNoZWNrIG51bWJlciBvcHRpb25zIScpCgltZW51KCkKZGVmIG1lbnVfZW5jKCk6CiAgICBjbHIoKQogICAgYmFubmVyX2VuYygpCiAgICBydW5uaW5nKCd7fVt7fTAxe31de30gRW5jcnlwdCBCYXNlMTYnLmZvcm1hdChtLHAsbSxrKSkKICAgIHJ1bm5pbmcoJ3t9W3t9MDJ7fV17fSBFbmNyeXB0IEJhc2UzMicuZm9ybWF0KG0scCxtLGspKQogICAgcnVubmluZygne31be30wM3t9XXt9IEVuY3J5cHQgQmFzZTY0Jy5mb3JtYXQobSxwLG0saykpCiAgICBydW5uaW5nKCd7fVt7fTA0e31de30gRW5jcnlwdCBIZXgnLmZvcm1hdChtLHAsbSxrKSkKICAgIHJ1bm5pbmcoJ3t9W3t9MDV7fV17fSBFbmNyeXB0IE1hcnNoYWwnLmZvcm1hdChtLHAsbSxrKSkKICAgIHJ1bm5pbmcoJ3t9W3t9MDZ7fV17fSBDb21waWxlIHB5ID4gcHljJy5mb3JtYXQobSxwLG0saykpCiAgICBydW5uaW5nKCd7fVt7fTA3e31de30gRW5jcnlwdCBNYXJzaGFsIFpsaWIgQmFzZTY0Jy5mb3JtYXQobSxwLG0saykpCiAgICBydW5uaW5nKCd7fVt7fTA4e31de30gRW5jcnlwdCBabGliICcuZm9ybWF0KG0scCxtLGspKQogICAgcnVubmluZygne31be30wMHt9XXt9IEV4aXQnLmZvcm1hdChtLHAsbSxrKSkKICAgIHJ1bm5pbmcoJycpCiAgICB0cnk6CiAgICAgICAgaW5wID0gcmF3X2lucHV0KCd7fVt7fT8/e31de30gQ2hvb3NlIHt9Pj57fSAnLmZvcm1hdChtLHAsbSxrLGgscCkpCiAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LEVPRkVycm9yKToKICAgICAgICBydW4gKCdEaXNhYmxlISEnKQogICAgICAgIG1lbnUoKQogICAgaWYgaW5wID09ICcxJyBvciBpbnAgPT0gJzAxJzoKICAgICAgICBjbHIoKQogICAgICAgIFNhdHUoKQogICAgZWxpZiBpbnAgPT0gJzInIG9yIGlucCA9PSAnMDInOgogICAgICAgIGNscigpCiAgICAgICAgRHVhKCkKICAgIGVsaWYgaW5wID09ICczJyBvciBpbnAgPT0gJzAzJzoKICAgICAgICBjbHIoKQogICAgICAgIFRpZ2EoKQogICAgZWxpZiBpbnAgPT0gJzQnIG9yIGlucCA9PSAnMDQnOgogICAgICAgIGNscigpCiAgICAgICAgRW1wYXQoKQogICAgZWxpZiBpbnAgPT0gJzUnIG9yIGlucCA9PSAnMDUnOgogICAgICAgIGNscigpCiAgICAgICAgTGltYSgpCiAgICBlbGlmIGlucCA9PSAnNicgb3IgaW5wID09ICcwNic6CiAgICAgICAgY2xyKCkKICAgICAgICBweWMoKQogICAgZWxpZiBpbnAgPT0gJzcnIG9yIGlucCA9PSAnMDcnOgoJY2xyKCkKICAgICAgICBlbXpiKCkKICAgIGVsaWYgaW5wID09ICc4JyBvciBpbnAgPT0gJzA4JzoKICAgICAgICBjbHIoKQogICAgICAgIGV6bCgpCiAgICBlbGlmIGlucCA9PSAnJzoKICAgICAgICBydW4gKCdJbnB1dCB5b3VyIGNob2ljZSEnKQogICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICBtZW51X2VuYygpCiAgICBlbGlmIGlucCA9PSAnMCcgb3IgaW5wID09ICcwMCc6CiAgICAgICAgZXhpdCgpCiAgICBlbHNlOgogICAgICAgIHJ1biAoJ1dyb25nISwgUGxlYXNlIGlucHV0IHlvdXIgY2hvaWNlJykKICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgbWVudV9lbmMoKQpkZWYgbWVudV9kZWMoKToKICAgIGNscigpCiAgICBiYW5uZXJfZGVjKCkKICAgIHJ1bm5pbmcoJ3t9W3t9MDF7fV17fSBEZWNyeXB0IGJhc2UxNicuZm9ybWF0KG0scCxtLGspKQogICAgcnVubmluZygne31be30wMnt9XXt9IERlY3J5cHQgYmFzZTMyJy5mb3JtYXQobSxwLG0saykpCiAgICBydW5uaW5nKCd7fVt7fTAze31de30gRGVjcnlwdCBiYXNlNjQnLmZvcm1hdChtLHAsbSxrKSkKICAgIHJ1bm5pbmcoJ3t9W3t9MDR7fV17fSBEZWNyeXB0IEhleCcuZm9ybWF0KG0scCxtLGspKQogICAgcnVubmluZygne31be30wNXt9XXt9IERlY3J5cHQgTWFyc2hhbCcuZm9ybWF0KG0scCxtLGspKQogICAgcnVubmluZygne31be30wNnt9XXt9IFVuY29tcHlsZTYgcHljID4gcHknLmZvcm1hdChtLHAsbSxrKSkKICAgIHJ1bm5pbmcoJ3t9W3t9MDd7fV17fSBEZWNyeXB0IE1hcnNoYWwsWmxpYixCYXNlNjQnLmZvcm1hdChtLHAsbSxrKSkKICAgIHJ1bm5pbmcoJ3t9W3t9MDh7fV17fSBEZWNyeXB0IFpsaWInLmZvcm1hdChtLHAsbSxrKSkKICAgIHJ1bm5pbmcoJ3t9W3t9MDB7fV17fSBFeGl0Jy5mb3JtYXQobSxwLG0saykpCiAgICBydW5uaW5nKCcnKQogICAgdHJ5OgogICAgICAgIGlucCA9IHJhd19pbnB1dCgne31be30/P3t9XXt9IENob29zZSB7fT4+e30gJy5mb3JtYXQobSxwLG0sayxoLHApKQogICAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCxFT0ZFcnJvcik6CiAgICAgICAgcnVuICgnRGlzYWJsZSEhJykKCW1lbnUoKQogICAgaWYgaW5wID09ICcxJyBvciBpbnAgPT0gJzAxJzoKCWNscigpCglFbmFtKCkKICAgIGVsaWYgaW5wID09ICcyJyBvciBpbnAgPT0gJzAyJzoKCWNscigpCglUdWp1aCgpCiAgICBlbGlmIGlucCA9PSAnMycgb3IgaW5wID09ICcwMyc6CgljbHIoKQoJRGVsYXBhbigpCiAgICBlbGlmIGlucCA9PSAnNCcgb3IgaW5wID09ICcwNCc6CgljbHIoKQoJU2VtYmlsYW4oKQogICAgZWxpZiBpbnAgPT0gJzUnIG9yIGlucCA9PSAnMDUnOgoJY2xyKCkKCXVubWFyc2goKQogICAgZWxpZiBpbnAgPT0gJzYnIG9yIGlucCA9PSAnMDYnOgoJY2xyKCkKCXVucHljKCkKICAgIGVsaWYgaW5wID09ICc3JyBvciBpbnAgPT0gJzA3JzoKICAgICAgICBjbHIoKQogICAgICAgIG16YigpCiAgICBlbGlmIGlucCA9PSAnOCcgb3IgaW5wID09ICcwOCc6CiAgICAgICAgY2xyKCkKICAgICAgICB6bCgpCiAgICBlbGlmIGlucCA9PSAnJzoKCXJ1biAoJ0lucHV0IG51bWJlciEnKQoJdGltZS5zbGVlcCgyKQoJbWVudV9kZWMoKQogICAgZWxpZiBpbnAgPT0gJzAnIG9yIGlucCA9PSAnMDAnOgoJZXhpdCgpCiAgICBlbHNlOgoJcnVuICgnV3JvbmcsIElucHV0IHlvdXIgY2hvaWNlIScpCgl0aW1lLnNsZWVwKDIpCgltZW51X2RlYygpCmRlZiBTYXR1KCk6CiAgICBjbHIoKQogICAgbG9nbygpCiAgICB0cnk6CiAgICAgICAgZiA9IHJhd19pbnB1dCgnRmlsZW5hbWVzOiAnKQogICAgZXhjZXB0OgogICAgICAgIGV4aXQoKQoKICAgIHRyeToKICAgICAgICBiayA9IG9wZW4oZiwgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdDoKICAgICAgICBydW4oJ2ZpbGUgJXMgbm90IGZvdW5kICcgJSBmKQogICAgICAgIHRpbWUuc2xlZXAoMS41KQoJU2F0dSgpCgogICAgZW4gPSBiYXNlNjQuYjE2ZW5jb2RlKGJrKQogICAgZmYgPSBmICsgJ2MnCiAgICBvcGVuKGZmLCAndycpLndyaXRlKCdpbXBvcnQgYmFzZTY0XG5leGVjKGJhc2U2NC5iMTZkZWNvZGUoIiVzIikpJyAlIGVuKQogICAgbm0gPSAoJycpLmpvaW4oZi5zcGxpdCgnLicpWzoxXSkgKyAnLWVuYy5weScKICAgIG9zLnJlbmFtZShmZiwgbm0pCiAgICBydW4oJ2ZpbGUgc3VjY2Vzc2Z1bGx5IGVuY3J5cHRlZCB0byAlcyAnICUgbm0pCmRlZiBEdWEoKToKICAgICAgICBjbHIoKQogICAgICAgIGxvZ28oKQogICAgICAgIHRyeToKICAgICAgICAgICAgZiA9IHJhd19pbnB1dCgnRmlsZW5hbWVzOiAnKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgZXhpdCgpCgogICAgICAgIHRyeToKICAgICAgICAgICAgYmsgPSBvcGVuKGYsICdyJykucmVhZCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBydW4oJ2ZpbGUgJXMgbm90IGZvdW5kICcgJSBmKQogICAgICAgICAgICBleGl0KCkKCiAgICAgICAgZW4gPSBiYXNlNjQuYjMyZW5jb2RlKGJrKQogICAgICAgIGZmID0gZiArICdjJwogICAgICAgIG9wZW4oZmYsICd3Jykud3JpdGUoJ2ltcG9ydCBiYXNlNjRcbmV4ZWMoYmFzZTY0LmIzMmRlY29kZSgiJyArIGVuICsgJyIpKScpCiAgICAgICAgbm0gPSAoJycpLmpvaW4oZi5zcGxpdCgnLicpWzoxXSkgKyAnLWVuYy5weScKICAgICAgICBvcy5yZW5hbWUoZmYsIG5tKQogICAgICAgIHJ1bignZmlsZSBzdWNjZXNzZnVsbHkgZW5jcnlwdGVkIHRvICVzICcgJSBubSkKZGVmIFRpZ2EoKToKICAgICAgICBjbHIoKQogICAgICAgIGxvZ28oKQogICAgICAgIHRyeToKICAgICAgICAgICAgZiA9IHJhd19pbnB1dCgnRmlsZW5hbWVzOiAnKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgZXhpdCgpCgogICAgICAgIHRyeToKICAgICAgICAgICAgYmsgPSBvcGVuKGYsICdyJykucmVhZCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBydW4oJ2ZpbGUgJXMgbm90IGZvdW5kICcgJSBmKQogICAgICAgICAgICBleGl0KCkKCiAgICAgICAgZW4gPSBiYXNlNjQuYjY0ZW5jb2RlKGJrKQogICAgICAgIGZmID0gZiArICdjJwogICAgICAgIG9wZW4oZmYsICd3Jykud3JpdGUoJ2ltcG9ydCBiYXNlNjRcbmV4ZWMoYmFzZTY0LmI2NGRlY29kZSgiJyArIGVuICsgJyIpKScpCiAgICAgICAgbm0gPSAoJycpLmpvaW4oZi5zcGxpdCgnLicpWzoxXSkgKyAnLWVuYy5weScKICAgICAgICBvcy5yZW5hbWUoZmYsIG5tKQogICAgICAgIHJ1bignZmlsZSBzdWNjZXNzZnVsbHkgZW5jcnlwdGVkIHRvICVzICcgJSBubSkKZGVmIEVtcGF0KCk6CiAgICAgICAgY2xyKCkKICAgICAgICBsb2dvKCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGYgPSByYXdfaW5wdXQoJ0ZpbGVuYW1lczogJykKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGV4aXQoKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGJrID0gb3BlbihmLCAncicpLnJlYWQoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcnVuKCdmaWxlICVzIG5vdCBmb3VuZCAnICUgZikKICAgICAgICAgICAgZXhpdCgpCgogICAgICAgIGVuID0gYmsuZW5jb2RlKCdoZXgnKQogICAgICAgIGZmID0gZiArICdjJwogICAgICAgIG9wZW4oZmYsICd3Jykud3JpdGUoJ2V4ZWMoIicgKyBlbiArICciKS5kZWNvZGUoImhleCIpJykKICAgICAgICBubSA9ICgnJykuam9pbihmLnNwbGl0KCcuJylbOjFdKSArICctZW5jLnB5JwogICAgICAgIG9zLnJlbmFtZShmZiwgbm0pCiAgICAgICAgcnVuKCdmaWxlIHN1Y2Nlc3NmdWxseSBlbmNyeXB0ZWQgdG8gJXMgJyAlIG5tKQpkZWYgTGltYSgpOgogICAgICAgIGNscigpCiAgICAgICAgbG9nbygpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmID0gcmF3X2lucHV0KCdGaWxlbmFtZXM6ICcpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBleGl0KCkKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBiayA9IG9wZW4oZiwgJ3InKS5yZWFkKCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJ1bignZmlsZSAlcyBub3QgZm91bmQgJyAlIGYpCiAgICAgICAgICAgIGV4aXQoKQoKICAgICAgICBjID0gY29tcGlsZShiaywgJzxva2tsYWg+JywgJ2V4ZWMnKQogICAgICAgIGVuID0gbWFyc2hhbC5kdW1wcyhjKQogICAgICAgIGZmID0gZiArICdjJwogICAgICAgIG9wZW4oZmYsICd3Jykud3JpdGUoJ2ltcG9ydCBtYXJzaGFsXG5leGVjKG1hcnNoYWwubG9hZHMoJyArIHJlcHIoZW4pICsgJykpJykKICAgICAgICBubSA9ICgnJykuam9pbihmLnNwbGl0KCcuJylbOjFdKSArICctZW5jLnB5JwogICAgICAgIG9zLnJlbmFtZShmZiwgbm0pCiAgICAgICAgcnVuKCdmaWxlIHN1Y2Nlc3NmdWxseSBlbmNyeXB0ZWQgdG8gJXMgJyAlIG5tKQpkZWYgZW16YigpOgoJY2xyKCkKCWxvZ28oKQoJdHJ5OgogICAgICAgICAgICBmaWxlID0gcmF3X2lucHV0KCdGaWxlOiAnKQogICAgICAgICAgICBmaWxlb3BlbiA9IG9wZW4oZmlsZSkucmVhZCgpCgkgICAgbm8gPSBjb21waWxlKGZpbGVvcGVuLCdhc28nLCdleGVjJykKCSAgICBiID0gbWFyc2hhbC5kdW1wcyhubykKICAgICAgICAgICAgYyA9IHpsaWIuY29tcHJlc3MoYikKICAgICAgICAgICAgZCA9IGJhc2U2NC5iNjRlbmNvZGUoYykKICAgICAgICAgICAgZSA9ICgnaW1wb3J0IG1hcnNoYWwsemxpYixiYXNlNjRcbmV4ZWMobWFyc2hhbC5sb2Fkcyh6bGliLmRlY29tcHJlc3MoYmFzZTY0LmI2NGRlY29kZSgiJyArIGQgKyAnIikpKSknKQogICAgICAgICAgICBmID0gZmlsZS5yZXBsYWNlKCcucHknLCAnLWVuYy5weScpCiAgICAgICAgICAgIGcgPSBvcGVuKGYsICd3JykKICAgICAgICAgICAgZy53cml0ZShlKQogICAgICAgICAgICBnLmNsb3NlKCkKICAgICAgICAgICAgcnVuKCdmaWxlIHN1Y2Nlc3NmdWxseSBlbmNyeXB0ZWQgdG8gJXMgJyAlIGYpCiAgICAgICAgICAgIHJhd19pbnB1dCgnUHJlc3MgRW50ZXIgVG8gUmV0dXJuIFRvIE1lbnUgJykKCSAgICBtZW51KCkKICAgICAgICBleGNlcHQgSU9FcnJvcjoKCSAgICBydW4oJ0ZpbGUgbm90IGZvdW5kICcpCgkgICAgcmF3X2lucHV0KCdQcmVzcyBFbnRlciBUbyBSZXR1cm4gVG8gTWVudSAnKQogICAgICAgICAgICBlbXpiKCkKZGVmIGV6bCgpOgogICAgcHJpbnQgIkVuY3J5cHQgWmxpYiIKICAgIGZpbGUgPSByYXdfaW5wdXQoJ0ZpbGUgOiAnKQogICAgb3V0ID0gZmlsZS5yZXBsYWNlKCcucHknLCAnLWVuYy5weScpCiAgICBvYSA9IG9wZW4oZmlsZSkucmVhZCgpCiAgICB4cyA9IHpsaWIuY29tcHJlc3Mob2EpCiAgICBzID0gb3BlbihvdXQsICd3JykKICAgIHMud3JpdGUoJ2ltcG9ydCB6bGliXG5leGVjKHpsaWIuZGVjb21wcmVzcygnICtyZXByKHhzKSsgJykpJykKICAgIHMuY2xvc2UoKQogICAgcHJpbnQgKCdGaWxlIHNhdmVkIGFzICcrIG91dCkKZGVmIEVuYW0oKToKICAgICAgICBjbHIoKQogICAgICAgIGJhbm5lcl9kZWMoKQogICAgICAgIHRyeToKCSAgICBwcmludCAnRGVjIGJhc2U2NC5iMTZkZWNvY2RlJwogICAgICAgICAgICBmID0gcmF3X2lucHV0KCdGaWxlbmFtZXM6ICcpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBleGl0KCkKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBiayA9IG9wZW4oZiwgJ3InKS5yZWFkKCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJ1bignZmlsZSAlcyBub3QgZm91bmQgJyAlIGYpCiAgICAgICAgICAgIGV4aXQoKQoKICAgICAgICBiayA9IGJrLnJlcGxhY2UoJ2V4ZWMoYmFzZTY0LmIxNmRlY29kZSgiJywgJycpCiAgICAgICAgYmsgPSBiay5yZXBsYWNlKCciKSknLCAnJykKICAgICAgICBiayA9IGJrLnJlcGxhY2UoJ2ltcG9ydCBiYXNlNjRcbicsICcnKQogICAgICAgIGVuID0gYmFzZTY0LmIxNmRlY29kZShiaykKICAgICAgICBmZiA9IGYgKyAnYycKICAgICAgICBvcGVuKGZmLCAndycpLndyaXRlKGVuKQogICAgICAgIG5tID0gKCcnKS5qb2luKGYuc3BsaXQoJy4nKVs6MV0pICsgJy1kZWNyeXB0LnB5JwogICAgICAgIG9zLnJlbmFtZShmZiwgbm0pCiAgICAgICAgcnVuKCdmaWxlIHN1Y2Nlc3NmdWxseSBkZWNyeXB0ZWQgdG8gJXMnICUgbm0pCmRlZiBUdWp1aCgpOgogICAgICAgIGNscigpCiAgICAgICAgYmFubmVyX2RlYygpKCkKICAgICAgICB0cnk6CgkgICAgcHJpbnQgJ0RlYyBiYXNlNjQuYjMyZGVjb2RlJwogICAgICAgICAgICBmID0gcmF3X2lucHV0KCdGaWxlbmFtZXM6ICcpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBleGl0KCkKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBiayA9IG9wZW4oZiwgJ3InKS5yZWFkKCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJ1bignZmlsZSAlcyBub3QgZm91bmQgJyAlIGYpCiAgICAgICAgICAgIGV4aXQoKQoKICAgICAgICBiayA9IGJrLnJlcGxhY2UoJ2V4ZWMoYmFzZTY0LmIzMmRlY29kZSgiJywgJycpCiAgICAgICAgYmsgPSBiay5yZXBsYWNlKCciKSknLCAnJykKICAgICAgICBiayA9IGJrLnJlcGxhY2UoJ2ltcG9ydCBiYXNlNjRcbicsICcnKQogICAgICAgIGVuID0gYmFzZTY0LmIzMmRlY29kZShiaykKICAgICAgICBmZiA9IGYgKyAnYycKICAgICAgICBvcGVuKGZmLCAndycpLndyaXRlKGVuKQogICAgICAgIG5tID0gKCcnKS5qb2luKGYuc3BsaXQoJy4nKVs6MV0pICsgJy1kZWNyeXB0LnB5JwogICAgICAgIG9zLnJlbmFtZShmZiwgbm0pCiAgICAgICAgcnVuKCdmaWxlIHN1Y2Nlc3NmdWxseSBkZWNyeXB0ZWQgdG8gJXMnICUgbm0pCmRlZiBEZWxhcGFuKCk6CgljbHIoKQogICAgICAgIGJhbm5lcl9kZWMoKQogICAgICAgIHRyeToKCSAgICBwcmludCAnRGVjIGJhc2U2NC5iNjRkZWNvZGUnCiAgICAgICAgICAgIGYgPSByYXdfaW5wdXQoJ0ZpbGVuYW1lczogJykKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGV4aXQoKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGJrID0gb3BlbihmLCAncicpLnJlYWQoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcnVuKCdmaWxlICVzIG5vdCBmb3VuZCAnICUgZikKICAgICAgICAgICAgZXhpdCgpCgogICAgICAgIGJrID0gYmsucmVwbGFjZSgrJ2V4ZWMoYmFzZTY0LmI2NGRlY29kZSgiJywgJycpCiAgICAgICAgYmsgPSBiay5yZXBsYWNlKCciKSknLCAnJykKICAgICAgICBiayA9IGJrLnJlcGxhY2UoJ2ltcG9ydCBiYXNlNjRcbicsICcnKQogICAgICAgIGVuID0gYmFzZTY0LmI2NGRlY29kZShiaykKICAgICAgICBmZiA9IGYgKyAnYycKICAgICAgICBvcGVuKGZmLCAndycpLndyaXRlKGVuKQogICAgICAgIG5tID0gKCcnKS5qb2luKGYuc3BsaXQoJy4nKVs6MV0pICsgJy1kZWNyeXB0LnB5JwogICAgICAgIG9zLnJlbmFtZShmZiwgbm0pCiAgICAgICAgcnVuKCdmaWxlIHN1Y2Nlc3NmdWxseSBkZWNyeXB0ZWQgdG8gJXMnICUgbm0pCmRlZiBTZW1iaWxhbigpOgoJY2xyKCkKICAgICAgICBiYW5uZXJfZGVjKCkKICAgICAgICB0cnk6CgkgICAgcHJpbnQgJ0RlYyBoZXgnCiAgICAgICAgICAgIGYgPSByYXdfaW5wdXQoJ0ZpbGVuYW1lczogJykKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGV4aXQoKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGJrID0gb3BlbihmLCAncicpLnJlYWQoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcnVuKCdmaWxlICVzIG5vdCBmb3VuZCAnICUgZikKICAgICAgICAgICAgZXhpdCgpCgogICAgICAgIGJrID0gYmsucmVwbGFjZSgnZXhlYygiJywgJycpIG9yIGJrLnJlcGxhY2UoImV4ZWMoJyIsICcnKQogICAgICAgIGJrID0gYmsucmVwbGFjZSgnIikuZGVjb2RlKCJoZXgiKScsICcnKSBvciBiay5yZXBsYWNlKCInKS5kZWNvZGUoJ2hleCcpIiwgJycpCiAgICAgICAgZW4gPSBzdHIoYmspLmRlY29kZSgnaGV4JykKICAgICAgICBmZiA9IGYgKyAnYycKICAgICAgICBvcGVuKGZmLCAndycpLndyaXRlKGVuKQogICAgICAgIG5tID0gKCcnKS5qb2luKGYuc3BsaXQoJy4nKVs6MV0pICsgJy1kZWNyeXB0LnB5JwogICAgICAgIG9zLnJlbmFtZShmZiwgbm0pCiAgICAgICAgcnVuKCdmaWxlIHN1Y2Nlc3NmdWxseSBkZWNyeXB0ZWQgdG8gJXMnICUgbm0pCmRlZiB1bm1hcnNoKCk6CiAgICBqYWxhbihwICsgMzEgKiAnXHhlMlx4OTVceDkwJyArIGggKyAnWycgKyBibSArICdVTk1BUlNIJyArIGggKyAnXScgKyBwICsgJz4nLCAwLjAwOCkKICAgIHByaW50IGggKyAnXG5NZW51ICcgKyBwICsgJzpcbiBbJyArIGggKyAnMScgKyBwICsgJ10uIEF1dG9tYXRpYyBEZXRlY3Rpb24gVmVyc2lvbiBTY3JpcHRcbiBbJyArIGggKyAnMicgKyBwICsgJ10uIEJhY2sgVG8gTWVudScKICAgIHRyeToKICAgICAgICBwaWwgPSByYXdfaW5wdXQoaCArICdbJyArIGsgKyAnPycgKyBoICsgJ10nICsgcCArICcgQ2hvaWNlLS0+ICcpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICB1bm1hcnNoKCkKICAgIGVsc2U6CiAgICAgICAgaWYgcGlsID09ICcxJzoKICAgICAgICAgICAgcGFzcwogICAgICAgIGVsaWYgcGlsID09ICcyJzoKICAgICAgICAgICAgbWVudSgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQgaCArICdbJyArIG0gKyAnIScgKyBoICsgJ10nICsgcCArICcgQ2hvb3NlIHRoZSByaWdodCBvbmUnCiAgICAgICAgICAgIHVubWFyc2goKQogICAgICAgIGNlayA9IDEKICAgICAgICB0cnk6CiAgICAgICAgICAgIHByaW50IGggKyAnWycgKyBrICsgJyMnICsgaCArICddJyArIHAgKyAnIEZvciBFeGFtcGxlIDogL3BhdGgvbWFyc2gucHknCiAgICAgICAgICAgIGZpbGUgPSByYXdfaW5wdXQoaCArICdbJyArIGsgKyAnPycgKyBoICsgJ10nICsgcCArICcgSW5wdXQgRmlsZSA6ICcpCiAgICAgICAgICAgIGYgPSBvcGVuKGZpbGUsICdyJykucmVhZGxpbmVzKCkKICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKGYpKToKICAgICAgICAgICAgICAgIGlmIGZbaV1bMDo0XSA9PSAnZXhlYyc6CiAgICAgICAgICAgICAgICAgICAgaWYgZltpXVsxOV0gPT0gJ2InOgogICAgICAgICAgICAgICAgICAgICAgICBjZWsgPSAzCiAgICAgICAgICAgICAgICAgICAgZWxpZiBmW2ldWzIwXSA9PSAnYyc6CiAgICAgICAgICAgICAgICAgICAgICAgIGNlayA9IDIKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBjZWsgPSAxCgogICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOgogICAgICAgICAgICBwcmludCBoICsgJ1snICsgbSArICchJyArIGggKyAnXScgKyBwICsgJyBQcm9ncmFtIEVycm9yISEhJwogICAgICAgICAgICBzeXMuZXhpdCgpCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0OgogICAgICAgICAgICBwcmludCBoICsgJ1snICsgayArICdeJyArIGggKyAnXScgKyBwICsgJyBjdHJsK2MgXG4nCiAgICAgICAgICAgIHByaW50IGggKyAnWycgKyBrICsgJyMnICsgaCArICddJyArIHAgKyAnIEV4aXQhISFcbicKICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICBzeXMuZXhpdCgpCiAgICAgICAgZXhjZXB0IEVPRkVycm9yOgogICAgICAgICAgICBwcmludCBoICsgJ1snICsgayArICdeJyArIGggKyAnXScgKyBwICsgJyBjdHJsK2QgXG4nCiAgICAgICAgICAgIHByaW50IGggKyAnWycgKyBrICsgJyMnICsgaCArICddJyArIHAgKyAnIEV4aXQhISFcbicKICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICBzeXMuZXhpdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc3RyaW5nID0gb3BlbihmaWxlLCAncicpLnJlYWQoKQogICAgICAgICAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICAgICAgICAgIHByaW50ICdcbicgKyBoICsgJ1snICsgbSArICchJyArIGggKyAnXScgKyBwICsgJyBGaWxlIE5vdCBGb3VuZCcKICAgICAgICAgICAgICAgIHJhd19pbnB1dChoICsgJ1snICsgayArICdeJyArIGggKyAnXScgKyBwICsgJyBQcmVzcyBFbnRlciB0byBSZXR1cm4gdG8gdGhlIG1lbnUgJykKICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICAgICAgbWVudSgpCgogICAgICAgIGlmIGNlayA9PSAyOgogICAgICAgICAgICBweSA9ICdweXRob24yJwogICAgICAgICAgICBkZWMgPSAnZGVjb21waWxlKDIuNywgeCwgc3Rkb3V0KScKICAgICAgICAgICAgc3lzLnN0ZG91dC53cml0ZShoICsgJ1snICsgayArICcjJyArIGggKyAnXScpCiAgICAgICAgICAgIGphbGFuKHAgKyAnIGNoZWNrIHRoZSBzY3JpcHQgdmVyc2lvbicsIDAuMSkKICAgICAgICAgICAgdGltZS5zbGVlcCgxLjUpCiAgICAgICAgICAgIHByaW50ICdcbicgKyBoICsgJ1snICsgbSArICcqJyArIGggKyAnXScgKyBwICsgJyBweXRob24gdmVyc2lvbiAyIHdhcyBkZXRlY3RlZCcKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB4ID0gcmUuc2VhcmNoKCcoKD88IVtcXFxcXSlbXFxcJyJdKSgoPzouKD8hKD88IVtcXFxcXSlcXDEpKSouPylcXDEnLCBzdHJpbmcpLmdyb3VwKCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2UgZQoKICAgICAgICBlbGlmIGNlayA9PSAzOgogICAgICAgICAgICBweSA9ICdweXRob24zJwogICAgICAgICAgICBkZWMgPSAnZGVjb21waWxlKDMuOCwgeCwgc3Rkb3V0KScKICAgICAgICAgICAgc3lzLnN0ZG91dC53cml0ZShoICsgJ1snICsgayArICcjJyArIGggKyAnXScpCiAgICAgICAgICAgIGphbGFuKHAgKyAnIGNoZWNrIHRoZSBzY3JpcHQgdmVyc2lvbicsIDAuMSkKICAgICAgICAgICAgdGltZS5zbGVlcCgxLjUpCiAgICAgICAgICAgIHByaW50ICdcbicgKyBoICsgJ1snICsgbSArICcqJyArIGggKyAnXScgKyBwICsgJyBweXRob24gdmVyc2lvbiAzIHdhcyBkZXRlY3RlZCcKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB4ID0gJ2InICsgcmUuc2VhcmNoKCcoKD88IVtcXFxcXSlbXFxcJyJdKSgoPzouKD8hKD88IVtcXFxcXSlcXDEpKSouPylcXDEnLCBzdHJpbmcpLmdyb3VwKCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2UgZQoKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCBoICsgJ1snICsgbSArICchJyArIGggKyAnXScgKyBwICsgJyBGaWxlIE5vdCBTdXBvcnQnCiAgICAgICAgICAgIHJhd19pbnB1dChoICsgJ1snICsgayArICdeJyArIGggKyAnXScgKyBwICsgJyBQcmVzcyBFbnRlciB0byBSZXR1cm4gdG8gdGhlIG1lbnUgJykKICAgICAgICAgICAgbWVudSgpCgogICAgZmlsZW91dCA9IG9wZW4oJ3VuLnB5JywgJ3cnKQogICAgZmlsZW91dC53cml0ZSgnZnJvbSBzeXMgaW1wb3J0IHN0ZG91dFxuZnJvbSB1bmNvbXB5bGU2Lm1haW4gaW1wb3J0IGRlY29tcGlsZVxuaW1wb3J0IG1hcnNoYWxcblxuJykKICAgIGZpbGVvdXQud3JpdGUoJ3ggPSBtYXJzaGFsLmxvYWRzKCcgKyB4ICsgJylcbicpCiAgICBmaWxlb3V0LndyaXRlKGRlYykKICAgIGZpbGVvdXQuY2xvc2UoKQogICAgbG9hZChoICsgJ1snICsgayArICcjJyArIGggKyAnXScgKyBwICsgJyBVbm1hcnNoYWwgcHJvY2VzcyBXYWl0IGEgbWludXRlIC4uLicpCiAgICBzcC5jYWxsKHB5ICsgJyB1bi5weSA+IHVucHljL2RlYy5weScsIHNoZWxsPVRydWUsIHN0ZGVycj1zcC5TVERPVVQpCiAgICBvcy5zeXN0ZW0oJ3JtIHVuLnB5JykKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdGltZS5zbGVlcCgxKQogICAgZGVsYXkgPSBvcGVuKCd1bnB5Yy9kZWMucHknLCAncicpLnJlYWRsaW5lcygpCiAgICBmb3IgeCBpbiByYW5nZShsZW4oZGVsYXkpKToKICAgICAgICBqYWxhbihkZWxheVt4XSwgMC4wMDAxKQoKICAgIHByaW50ICdcblxuJyArIGggKyAnWycgKyBrICsgJyMnICsgaCArICddJyArIHAgKyAnIFN1Y2Nlc3NmdWxseSBEZWNvbXBpbGVkJwogICAgcHJpbnQgaCArICdbJyArIGsgKyAnIycgKyBoICsgJ10nICsgcCArICcgZmlsZSBzYXZlZCA6IHVucHljL2RlYy5weScKICAgIGFzayA9IHJhd19pbnB1dChoICsgJ1snICsgayArICc/JyArIGggKyAnXScgKyBwICsgJyBEZWNvbXBpbGUgQWdhaW4/IHkvdCAnKQogICAgaWYgYXNrID09ICd5JyBvciBhc2sgPT0gJ1knOgogICAgICAgIG1lbnUoKQogICAgZWxpZiBhc2sgPT0gJ3QnIG9yIGFzayA9PSAnVCc6CiAgICAgICAgc3lzLmV4aXQoKQogICAgZWxzZToKICAgICAgICBwcmludCBoICsgJ1snICsgbSArICchJyArIGggKyAnXScgKyBwICsgJyBDaG9vc2UgdGhlIHJpZ2h0IG9uZSAnICsgbSArICchISEnCiAgICAgICAgcmF3X2lucHV0KGggKyAnWycgKyBrICsgJ14nICsgaCArICddJyArIHAgKyAnIFByZXNzIEVudGVyIHRvIFJldHVybiB0byB0aGUgbWVudSAnKQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQpkZWYgcHljKCk6CiAgICBwcmludCBtICsgJ1snICsgcCArICcjJyArIG0gKyAnXScgKyBwICsgJyBGb3IgRXhhbXBsZSA6IC9wYXRoL21hcnNoLnB5JwogICAgZiA9IHJhd19pbnB1dChtICsgJ1snICsgcCArICc/JyArIG0gKyAnXScgKyBwICsgJyBFbnRlciBZb3VyIEZpbGUgOiAnKQogICAgZnJvbSBweV9jb21waWxlIGltcG9ydCBjb21waWxlCiAgICBjb21waWxlKGYpCiAgICBsb2FkKG0gKyAnWycgKyBwICsgJyMnICsgbSArICddJyArIHAgKyAnIENvbXBpbGUgcHJvY2VzcyBXYWl0IGEgbWludXRlIC4uLicpCiAgICBqYWxhbignXG4nICsgbSArICdbJyArIHAgKyAnIycgKyBtICsgJ10nICsgcCArICcgZmlsZSBzdWNjZXNzZnVsbHkgY29tcGlsZWQnLCAwLjAxKQogICAgcHJpbnQgJ1xuJyArIG0gKyAnWycgKyBwICsgJyMnICsgbSArICddJyArIHAgKyAoJyBGaWxlIFNhdmVkOiB7fWMnKS5mb3JtYXQoZikKICAgIGFzayA9IHJhd19pbnB1dChtICsgJ1snICsgcCArICc/JyArIG0gKyAnXScgKyBwICsgJyBDb21waWxlIEFnYWluPyB5L3QgPj4gJykKICAgIGlmIGFzayA9PSAneScgb3IgYXNrID09ICdZJzoKICAgICAgICBtZW51KCkKICAgIGVsaWYgYXNrID09ICd0JyBvciBhc2sgPT0gJ1QnOgogICAgICAgIHN5cy5leGl0KCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgbSArICdbJyArIG0gKyAnIScgKyBtICsgJ10nICsgcCArICcgQ2hvb3NlIHRoZSByaWdodCBvbmUgJyArIG0gKyAnISEhJwogICAgICAgIHJhd19pbnB1dChtICsgJ1snICsgcCArICdeJyArIG0gKyAnXScgKyBwICsgJyBQcmVzcyBFbnRlciB0byBSZXR1cm4gdG8gdGhlIG1lbnUgJykKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBtZW51KCkKZGVmIHVucHljKCk6CiAgICBwcmludCBtICsgJ1snICsgcCArICcjJyArIG0gKyAnXScgKyBwICsgJyBGb3IgRXhhbXBsZSA6IC9wYXRoL2ZpbGUucHljJwogICAgZiA9IHJhd19pbnB1dChtICsgJ1snICsgcCArICc/JyArIG0gKyAnXScgKyBwICsgJyBFbnRlciBZb3VyIEZpbGUgOiAnKQogICAgdHJ5OgogICAgICAgIG9wZW4oZiwgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50IG0gKyAnWycgKyBtICsgJyEnICsgbSArICddJyArIHAgKyAnIEZpbGUgTm90IEZvdW5kJwogICAgICAgIHJhd19pbnB1dChtICsgJ1snICsgcCArICdeJyArIG0gKyAnXScgKyBwICsgJyBQcmVzcyBFbnRlciB0byBSZXR1cm4gdG8gdGhlIG1lbnUgJykKICAgICAgICBtZW51KCkKICAgIGVsc2U6CiAgICAgICAgbG9hZChtICsgJ1snICsgcCArICcjJyArIG0gKyAnXScgKyBwICsgJyBEZWNvbXBpbGUgcHJvY2VzcyBXYWl0IGEgbWludXRlIC4uLicpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBvcy5zeXN0ZW0oJ3VuY29tcHlsZTYgJyArIGYgKyAnPiB1bnB5Yy9qYWRpLnB5JykKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50IG0gKyAnWycgKyBtICsgJyEnICsgbSArICddJyArIHAgKyAnIEZhaWxlZCB0byBkZWNvbXBpbGUgYmVjYXVzZSA6ICcgKyBlCgogICAgcHJpbnQgJ1xuXG4nICsgbSArICdbJyArIHAgKyAnIycgKyBtICsgJ10nICsgcCArICcgU3VjY2Vzc2Z1bGx5IERlY29tcGlsZWQnCiAgICBwcmludCBtICsgJ1snICsgcCArICcjJyArIG0gKyAnXScgKyBwICsgJyBmaWxlIHNhdmVkIDogdW5weWMvamFkaS5weScKICAgIGFzayA9IHJhd19pbnB1dChtICsgJ1snICsgcCArICc/JyArIG0gKyAnXScgKyBwICsgJyBEZWNvbXBpbGUgQWdhaW4/IHkvdCA+PiAnKQogICAgaWYgYXNrID09ICd5JyBvciBhc2sgPT0gJ1knOgogICAgICAgIG1lbnUoKQogICAgZWxpZiBhc2sgPT0gJ3QnIG9yIGFzayA9PSAnVCc6CiAgICAgICAgc3lzLmV4aXQoKQogICAgZWxzZToKICAgICAgICBwcmludCBtICsgJ1snICsgbSArICchJyArIG0gKyAnXScgKyBwICsgJyBDaG9vc2UgdGhlIHJpZ2h0IG9uZSAnICsgbSArICchISEnCiAgICAgICAgcmF3X2lucHV0KG0gKyAnWycgKyBwICsgJ14nICsgbSArICddJyArIHAgKyAnIFByZXNzIEVudGVyIHRvIFJldHVybiB0byB0aGUgbWVudSAnKQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIG1lbnUoKQpkZWYgbXpiKCk6CiAgICBwcmludCAnRGVjb21waWxlIE1hcnNoYWwsWmxpYixCYXNlNjQnCiAgICBhID0gcmF3X2lucHV0KCdGaWxlIDogJyApCiAgICBiID0gb3BlbihhKS5yZWFkKCkucmVwbGFjZSgnZXhlYygnLCAneCA9ICcpLnJlcGxhY2UoJykpKSknLCcpKSknKQogICAgYyA9IG9wZW4oJ21pLnB5JywgJ3cnKQogICAgaWYgJ21hcnNoYWwnIGluIGI6CiAgICAgICAgYy53cml0ZSgnZnJvbSBzeXMgaW1wb3J0IHN0ZG91dFxuZnJvbSB1bmNvbXB5bGU2Lm1haW4gaW1wb3J0IGRlY29tcGlsZVxuJyArIGIgKyAnXG5kZWNvbXBpbGUoMi43LCB4LCBzdGRvdXQpJykKICAgICAgICBjLmNsb3NlKCkKICAgIGVsaWYgJ21hcnNoYWwnIG5vdCBpbiBiOgogICAgICAgIGMud3JpdGUoYiArICdcbnByaW50ICh4KScpCiAgICAgICAgYy5jbG9zZSgpCiAgICBkID0gYS5yZXBsYWNlKCcucHknLCAnLWRlY3J5cHQucHknKQogICAgb3Muc3lzdGVtKCdweXRob24yIG1pLnB5ID4gJyArIGQpCiAgICBlID0gb3BlbihkKS5yZWFkKCkKICAgIGYgPSBvcGVuKGQsICd3JykKICAgIGYud3JpdGUoZSArICcgXG5cblxuXHQnKQogICAgZi5jbG9zZSgpCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBtaS5weScpCiAgICBwcmludCgnXHgxYlszMTsxbVtceDFiWzA7MzdtK1x4MWJbMzE7MW1dXHgxYlswOzM3bSBGaWxlIHNhdmVkIGFzXHgxYlszMjsxbSAnICsgZCkKICAgIHByaW50KCdXYW50IERlY3J5cHQgQWdhaW4gKFkvTikgPycpCiAgICBjdWsgPSByYXdfaW5wdXQoJ0Nob2ljZSA6ICcpCiAgICBpZiBjdWsgPT0gJ3knOgogICAgICBtemIoKQogICAgZWxpZiBjdWsgPT0gJ24nOgogICAgICBleGl0KCkKZGVmIHpsKCk6CiAgICBwcmludCAnRGVjb21waWxlIFpsaWInCiAgICBhID0gcmF3X2lucHV0KCdGaWxlIDogJykKICAgIGIgPSBvcGVuKGEpLnJlYWQoKS5yZXBsYWNlKCdleGVjJywgJ3ByaW50JykKICAgIGMgPSBvcGVuKCdtYS5weScsICd3JykKICAgIGlmICd6bGliJyBpbiBiOgogICAgICAgIGMud3JpdGUoJ1xuJyArIGIgKyAnJykKICAgICAgICBjLmNsb3NlKCkKICAgIGVsaWYgJ3psaWInIG5vdCBpbiBiOgogICAgICAgIGMud3JpdGUoYiArICdcbnByaW50IChwcmludCknKQogICAgICAgIGMuY2xvc2UoKQogICAgZCA9IGEucmVwbGFjZSgnLnB5JywgJy1kZWNyeXB0LnB5JykKICAgIG9zLnN5c3RlbSgncHl0aG9uMiBtYS5weSA+ICcrIGQpCiAgICBmID0gb3BlbihkLCAndycpCiAgICBmLndyaXRlKCcjIFN1a3Nlc3MgRGVjb21waWxlIOKckyBcbicrIGUpCiAgICBmLmNsb3NlKCkKICAgIG9zLnN5c3RlbSgncm0gLXJmIG1hLnB5JykKICAgIHByaW50KCdGaWxlIHNhdmVkIGFzICcrIGQpCiAgICBzeXMuZXhpdCgpCmRlZiBleGl0KCk6CiAgICAgICAgcnVuKCd0aGFua3MgZm9yIHVzaW5nIERBUkstV09MRi1UT09MUyA6KScpCiAgICAgICAgc3lzLmV4aXQoKQoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIGlmIG9zLnBhdGguZXhpc3RzKCd1bnB5YycpOgogICAgICAgIG1lbnUoKQogICAgZWxzZToKICAgICAgICBvcy5zeXN0ZW0oJ21rZGlyIHVucHljJykKICAgICAgICBtZW51KCkK"))